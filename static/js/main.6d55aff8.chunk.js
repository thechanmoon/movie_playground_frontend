(this.webpackJsonpmovie_pg=this.webpackJsonpmovie_pg||[]).push([[0],{35:function(e,t,n){e.exports=n(62)},40:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(20),s=n.n(l),o=(n(40),n(15)),i=n(3),c=n(4),u=n(6),h=n(5),m=n(2),d="https://moviepg-api.herokuapp.com/",p="https://image.tmdb.org/t/p/w300_and_h450_bestv2",g=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={searchTerm:"",indexTerm:"popular"},e.handleLogout=function(){fetch(d+"/logout",{method:"POST",credentials:"include"}).then((function(e){return e.json()})).then((function(){e.props.handleUpdateCurrentUser(null)}))},e.handleChange=function(t){e.setState({searchTerm:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.handleUpdateSearch(e.state.searchTerm),e.setState({searchTerm:""})},e.handleIndexSelectChange=function(t){console.log(t.target.value),e.setState({indexTerm:t.target.value}),e.props.handleIndexSelectChange(t.target.value)},e}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement(o.b,{to:"/listings"},r.a.createElement("div",{className:"logo"})),r.a.createElement("div",{className:"logo-playground"}),r.a.createElement(o.b,{to:"/Journals"},r.a.createElement("button",null,"Journals")),r.a.createElement("select",{name:"indexSelect",onChange:this.handleIndexSelectChange},r.a.createElement("option",{value:"popular"},"popular"),r.a.createElement("option",{value:"upcoming"},"upcoming"),r.a.createElement("option",{value:"now_playing"},"now_playing"),r.a.createElement("option",{value:"top_rated"},"top_rated")),r.a.createElement("form",{className:"search",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"searchInput",placeholder:"Search movies...",value:this.state.searchTerm,onChange:this.handleChange}),r.a.createElement("button",{className:"btn btn-primary"},"Search")),r.a.createElement("div",{className:"actions"},this.props.currentUser?r.a.createElement("button",{onClick:this.handleLogout},"Logout ",this.props.currentUser.username):r.a.createElement(r.a.Fragment,null,r.a.createElement(o.b,{to:"/login"},r.a.createElement("button",null,"Login")),r.a.createElement(o.b,{to:"/signup"},r.a.createElement("button",null,"Sign Up")))))}}]),n}(r.a.Component),v=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={favorite:!0},e.toggleFavorite=function(){e.setState((function(e){return{favorite:!e.favorite}}))},e.sliceTitle=function(e){return e.length<19?e:"".concat(e.slice(0,18),"...")},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props.listing.table,n=t.id,a=t.poster_path,l=t.title,s=p+a;return r.a.createElement("div",{className:"card",onClick:function(){return e.props.showDetail(n)}},r.a.createElement("div",{className:"image",style:{backgroundImage:"url(".concat(s,")")}}),r.a.createElement("div",{className:"info"},r.a.createElement("h4",{className:"title"},this.sliceTitle(l))))}}]),n}(r.a.Component),f=function(){return r.a.createElement("div",{className:"spinner-container"},r.a.createElement("div",{className:"spinner"}))},E=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={fourStarOnly:!1,startIndex:0,listings:[],showMap:!0,loaded:!1,searchTerm:"",indexTerm:""},e.toggleShowMap=function(){e.setState((function(e){return{showMap:!e.showMap}}))},e.handleFourStarFilter=function(){e.setState((function(e){return{fourStarOnly:!e.fourStarOnly,startIndex:0}}))},e.handleUpdateIndex=function(t){e.setState({startIndex:t})},e.handleUpdateListing=function(t){var n=e.state.listings.map((function(e){return t.id===e.id?t:e}));e.setState({listings:n})},e.showDetail=function(t){console.log("showDetail id = ",t),e.props.history.push("/listings/".concat(t))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.fetchListings()}},{key:"componentDidUpdate",value:function(e){console.log(e),console.log(this.props),console.log(e.searchTerm),console.log(this.props.searchTerm),e.searchTerm!==this.props.searchTerm?(this.setState({searchTerm:this.props.searchTerm}),this.fetchSearchListings(this.props.searchTerm),this.setState({searchTerm:"????"})):e.indexTerm!==this.props.indexTerm&&(this.setState({indexTerm:this.props.indexTerm}),this.fetchListings(this.props.indexTerm))}},{key:"fetchListings",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.log(this.props),console.log("indexTerm : ",t);var n=d+"/lists?query=".concat(t);console.log(n),fetch(n,{credentials:"include"}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({listings:t,startIndex:0,loaded:!0})}))}},{key:"fetchSearchListings",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.log(this.props),console.log("searchTermv: ",t);var n=d+"/search?query='".concat(t,"'");console.log(n),fetch(n,{credentials:"include"}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({listings:t,startIndex:0,loaded:!0,searchTerm:""})}))}},{key:"getFilteredListings",value:function(){var e=this.state.listings;return this.state.fourStarOnly&&(e=e.filter((function(e){return e.rating>=4}))),e}},{key:"getPagedListings",value:function(e){}},{key:"getSearchedListing",value:function(){}},{key:"getListingCards",value:function(e){var t=this;return console.log(e),e.map((function(e){return r.a.createElement(v,{key:e.table.id,listing:e,showDetail:t.showDetail,handleUpdateListing:t.handleUpdateListing})}))}},{key:"render",value:function(){if(!this.state.loaded)return r.a.createElement(f,null);var e=this.getListingCards(this.state.listings);return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"listings"},e))}}]),n}(r.a.Component),b=n(13),y={text:"",rating:1,watch_date:""},S=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state=y,e.handleInputChange=function(t){var n=t.target.name;e.setState(Object(b.a)({},n,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.fetchCreateMovie()},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.setState({currentMovie:this.props.currentMovie})}},{key:"fetchCreateMovie",value:function(){var e=this;console.log(this.state.currentMovie);var t={title:this.state.currentMovie.title,poster_path:this.state.currentMovie.poster_path,overview:this.state.currentMovie.overview,tmdb_id:this.state.currentMovie.id};fetch(d+"/movies",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){console.log(t),console.log(t.id),e.fetchCreateJournal(t.id)}))}},{key:"fetchCreateJournal",value:function(e){var t=this;fetch(d+"/movies/".concat(e,"/journals"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(this.state)}).then((function(e){return e.json()})).then((function(e){t.setState(y),t.props.fetchMovie()}))}},{key:"render",value:function(){var e=this.state,t=e.text,n=e.date;return r.a.createElement("div",{className:"form-container-wide"},r.a.createElement("h4",null,"Write a Journal"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("textarea",{name:"text",onChange:this.handleInputChange,value:t}),r.a.createElement("input",{type:"date",name:"watch_date",onChange:this.handleInputChange,value:n}),r.a.createElement("input",{type:"submit",value:"Submit"})))}}]),n}(r.a.Component),j=function(e){e.username;var t=e.watch_date,n=e.text;return r.a.createElement("div",null,r.a.createElement("div",{className:"journal"},r.a.createElement("section",null,r.a.createElement("h5",null,t.slice(0,10)),r.a.createElement("p",{className:"comment"},n),r.a.createElement("p",null,"\n"))),r.a.createElement("div",null,r.a.createElement("button",null," Edit"),r.a.createElement("button",null," Delete")))},w=function(e){return console.log(e),r.a.createElement("div",{className:"review"},r.a.createElement("h5",null,e.table.author),r.a.createElement("span",{className:"comment"},r.a.createElement("a",{href:e.table.url,class:"active"},e.table.url)))},O=n(31),C=n.n(O),T=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={listing:null,loaded:!1,reviews:[],video_url:"",currentMovie:{}},e.fetchMovie=function(){console.log("ListingPage componentDidMount"),fetch(d+"/apis/".concat(e.props.match.params.id),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){console.log(t),console.log(t.reviews),e.setState({listing:t,loaded:!0,video_url:t.movie.table.videos&&t.movie.table.videos.length>0?"https://www.youtube.com/watch?v="+t.movie.table.videos[0]:"",reviews:t.reviews,currentMovie:t.movie.table}),console.log(t),console.log(t.id)}))},e.fetchSearchReviews=function(t){console.log(t);var n=d+"/movies/".concat(t,"/reviews/search");console.log(n),fetch(n,{credentials:"include"}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({reviews:t,loaded:!0})}))},e.handleUpdateListing=function(t){e.setState({listing:t})},e.toggleFavorite=function(){e.state.listing.favorite?fetch(d+"/listings/".concat(e.state.listing.id,"/favorites/remove"),{method:"DELETE",credentials:"include"}).then((function(e){return e.json()})).then((function(t){return e.setState({listing:t})})):fetch(d+"/listings/".concat(e.state.listing.id,"/favorites"),{method:"POST",credentials:"include"}).then((function(e){return e.json()})).then((function(t){return e.setState({listing:t})}))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.fetchMovie()}},{key:"render",value:function(){if(console.log(this.props),console.log(this.state),!this.state.loaded)return r.a.createElement(f,null);var e=this.state.listing.movie.table,t=e.id,n=e.poster_path,a=e.title,l=e.overview,s=e.release_date,o=e.runtime,i=e.vote_average,c=e.revenue,u=e.genres,h=e.casts,m=this.state.listing.reviews,d=this.state.listing.journals;console.log(this.state.listing),console.log(this.state.listing.reviews),console.log(m);var g=p+n;return r.a.createElement("div",{className:"detail"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"detail-info"},r.a.createElement("div",{className:"image",style:{backgroundImage:"url(".concat(g,")")}}),r.a.createElement("div",null,r.a.createElement("h2",null," Genre: "),r.a.createElement("ul",{className:"casts"},u),r.a.createElement("h2",null,"Casts: "),r.a.createElement("ul",{className:"casts"},h?h.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("span",null,r.a.createElement("a",{href:"/actors"},e)))})):""))),r.a.createElement("div",{className:"detail-info"},r.a.createElement("h1",{className:"title"},"Title : ",a),r.a.createElement("span",null,r.a.createElement("h2",null," OverView : ",l)),r.a.createElement("span",null,r.a.createElement("h2",null," Release date : ",s),r.a.createElement("h2",null," Runtime : ",o," minutes"),r.a.createElement("h2",null," Vote Average : ",i," "),r.a.createElement("h2",null," Revenue : $",c.toLocaleString("en")," "),r.a.createElement(C.a,{url:this.state.video_url,controls:!0})))),r.a.createElement("div",{className:"detail"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"journals"},r.a.createElement("h2",null,d&&d.length>0?" Journals":""),d&&d.map((function(e){return r.a.createElement(j,Object.assign({key:e.id},e))})),r.a.createElement(S,{listingId:t,currentMovie:this.state.listing.movie.table,handleUpdateListing:this.handleUpdateListing,fetchMovie:this.fetchMovie})),r.a.createElement("div",{className:"reviews"},r.a.createElement("h2",null,m&&m.table.results.length>0?"Reviews":""),m?m.table.results.map((function(e){return r.a.createElement(w,Object.assign({key:e.id},e))})):""))))}}]),n}(r.a.Component),N=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleInputChange=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),fetch(d+"/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e.state)}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(t){e.props.history.push("/listings"),e.props.handleUpdateCurrentUser(t)})).catch(console.error)},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return r.a.createElement("div",{className:"form-container"},r.a.createElement("h3",null,"Login to your account"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",onChange:this.handleInputChange,value:t}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",onChange:this.handleInputChange,value:n}),r.a.createElement("input",{type:"submit",value:"Login"})))}}]),n}(r.a.Component),U=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",password_confirmation:""},e.handleInputChange=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.state.password===e.state.password_confirmation?fetch(d+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e.state)}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(t){e.props.history.push("/listings"),e.props.handleUpdateCurrentUser(t)})).catch(console.error):alert("passwords don't match")},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password,a=e.password_confirmation;return r.a.createElement("div",{className:"form-container"},r.a.createElement("h3",null,"Sign up for an account"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",onChange:this.handleInputChange,value:t}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",onChange:this.handleInputChange,value:n}),r.a.createElement("label",null,"Confirm Password:"),r.a.createElement("input",{type:"password",name:"password_confirmation",onChange:this.handleInputChange,value:a}),r.a.createElement("input",{type:"submit",value:"Sign Up"})))}}]),n}(r.a.Component),k=n(17),x=function(e){var t,n=e.movie,a=n.poster_path,l=n.title,s=n.journals,o=p+a;return r.a.createElement("div",{className:"card-journal",onClick:function(){}},r.a.createElement("div",{className:"image",style:{backgroundImage:"url(".concat(o,")")}}),r.a.createElement("div",{className:"info"},r.a.createElement("h4",{className:"title"},(t=l).length<19?t:"".concat(t.slice(0,18),"..."))),r.a.createElement("div",{className:"journal-info"},s&&s.map((function(e){return r.a.createElement(j,Object.assign({key:e.id},e))}))))},I=function(){var e=Object(k.d)((function(e){return e.movies}));console.log(e);var t=Object(k.c)();return Object(a.useEffect)((function(){!function(){var e=d+"/movies";console.log(e),fetch(e,{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return t({type:"SET_MOVIES",payload:e})}))}()})),r.a.createElement("div",null,r.a.createElement("section",{className:"listings"},e?e.map((function(e){return r.a.createElement(x,{key:e.id,movie:e})})):""))},M=function(e){e.username;var t=e.watch_date,n=e.text;return console.log("ActorDetail"),r.a.createElement("div",null,r.a.createElement("div",{className:"journal"},"ActorDetails",r.a.createElement("section",null,r.a.createElement("h5",null,t),r.a.createElement("p",{className:"comment"},n),r.a.createElement("p",null,"\n"))),r.a.createElement("div",{style:{flexGrow:0,flexBasis:"33.333%"}}))},_=n(14),L=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={currentUser:null,searchTerm:"",indexTerm:""},e.handleUpdateCurrentUser=function(t){console.log(t),e.setState({currentUser:t})},e.handleUpdateSearch=function(t){e.setState({searchTerm:t})},e.handleIndexSelectChange=function(t){e.setState({indexTerm:t})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.title="Movie Playground",fetch(d+"/autologin",{mode:"no-cors",credentials:"include"}).then((function(e){if(console.log(e),!e.ok)throw e;return e.json()})).then((function(t){return e.setState({currentUser:t})})).catch(console.error)}},{key:"render",value:function(){var e=this;return console.log("In app",this.state),r.a.createElement(r.a.Fragment,null,"Movie app",r.a.createElement(g,{handleUpdateCurrentUser:this.handleUpdateCurrentUser,handleUpdateSearch:this.handleUpdateSearch,handleIndexSelectChange:this.handleIndexSelectChange,currentUser:this.state.currentUser}),r.a.createElement("main",null,r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(E,Object.assign({},t,{searchTerm:e.state.searchTerm,indexTerm:e.state.indexTerm}))}}),r.a.createElement(m.a,{path:"/login",render:function(t){return r.a.createElement(N,Object.assign({},t,{handleUpdateCurrentUser:e.handleUpdateCurrentUser}))}}),r.a.createElement(m.a,{path:"/signup",render:function(t){return r.a.createElement(U,Object.assign({},t,{handleUpdateCurrentUser:e.handleUpdateCurrentUser}))}}),r.a.createElement(m.a,{path:"/actors/:id",render:function(e){return r.a.createElement(M,e)}}),r.a.createElement(m.a,{exact:!0,path:"/listings",render:function(t){return r.a.createElement(E,Object.assign({},t,{searchTerm:e.state.searchTerm,indexTerm:e.state.indexTerm}))}}),r.a.createElement(m.a,{path:"/listings/:id",render:function(e){return r.a.createElement(T,e)}}),this.state.currentUser&&r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{path:"/journals",render:function(e){return r.a.createElement(I,e)}})))))}}]),n}(r.a.Component),D=Object(_.compose)(m.f,Object(k.b)((function(e){return console.log("mSP",e),{counter:e.counter,paused:e.paused,likedNumbers:e.likedNumbers}}),(function(e){return{someFunc:function(){return e({type:"WHATEVER"})}}})))(L),P=n(19),A={counter:100,paused:!0,likedNumbers:{},comment:"pls work?",comments:["some comment"],somethingElse:"yeah",movies:null},J=n(33),F=n(34),R=Object(_.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case"SET_MOVIES":case"FETCH_MOVIES":return Object(P.a)(Object(P.a)({},e),{},{movies:t.payload});default:return e}}),Object(J.composeWithDevTools)(Object(_.applyMiddleware)(F.a)));s.a.render(r.a.createElement(k.a,{store:R},r.a.createElement(o.a,null,r.a.createElement(D,null))),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.6d55aff8.chunk.js.map